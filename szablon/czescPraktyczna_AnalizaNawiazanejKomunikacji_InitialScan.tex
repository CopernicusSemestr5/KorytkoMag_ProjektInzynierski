% \chapter{Analiza nawiązanej komunikacji}
\section{Skanowanie urządzeń}
Parametrem tej komendy jest adres portu 5555, z którego korzysta sterownik
do nawiązania połączenia typu tcp na adresie 127.0.0.1 wraz z symulatorem urządzenia,
przy zastosowaniu wzorca Żadanie-Odpowiedź. Jest to wzorzec, który zakłada otrzymanie odpowiedzi na każdą wysłaną wiadomość, zanim kolejna zostanie nadana. 
Opisany mechanizm komunikacji aplikowalny jest również do wszystkich poniższych komend.

Analiza wartości wiadomości przychodzącej 
(rysunek \ref{lst:WykonanieProgramu} - linijki {15, 16}, rysunek \ref{fig:DiagramSequence_LinkSpeed_DeviceScan}):
\begin{enumerate}
    \item ADDR = 0xFF --- \textit{broadcast};
    \item CTRL = 0xBF --- charakterystyczny dla ramki XID;
    \item FI = 0x81 --- charakterystyczna dla ramki XID oraz grupy wiadomości przypisania adresu;
    \item GI = 0xF0 --- grupa wiadomości przypisania adresu;
    \item GL = 0x08;
\end{enumerate}

Analiza wartości wiadomości przychodzącej 
(rysunek \ref{lst:WykonanieProgramu}- linijka 17, rysunek \ref{fig:DiagramSequence_LinkSpeed_DeviceScan}):
\begin{enumerate}
    \item ADDR = 0x00 --- urządzenie podrzędne jest jest w stanie niezaadresowanym;
    \item CTRL = 0xBF --- charakterystyczny dla ramki XID;
    \item FI = 0x81 --- charakterystyczna dla ramki XID oraz grupy wiadomości przypisania adresu;
    \item GI = 0xF0 --- grupa wiadomości przypisania adresu;
    \item GL = 0x12;
    \item Pierwszy parametr HDLC:
    \begin{enumerate}
        \item PI = 0x01 --- unikalny identyfikator urządzenia podrzędnego;
        \item PL = 0x09;
        \item PV = \{ 0x4E, 0x4B, 0x34, 0x36, 0x35, 0x30, 0x30, 0x30, 0x30 \};
    \end{enumerate}
    \item Drugi parametr HDLC:
    \begin{enumerate}
        \item PI = 0x04 --- typ urządzenia podrzędnego;
        \item PL = 0x01;
        \item PV = 0x01 --- pojedynczy RET;
    \end{enumerate}
    \item Trzeci parametr HDLC:
    \begin{enumerate}
        \item PI = 0x06 --- kod producenta urządzenia podrzędnego;
        \item PL = 0x02;
        \item PV = \{ 0x4E, 0x4B \};
    \end{enumerate}
\end{enumerate}


